<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - LaundryExpress Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="mainDashboard" class="container">
        <header class="main-header"
            style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
            <div class="brand-section" style="display: flex; align-items: center; gap: 20px;">
                <h1 id="shopNameDisplay" style="margin: 0;">ðŸ§º LaundryExpress Pro</h1>
                <button onclick="cetakLaporanBulanan()" class="btn-print-report">
                    <i class="fas fa-file-pdf"></i> Cetak Laporan
                </button>
            </div>
            <button class="btn-logout" onclick="handleLogout()">Keluar <i class="fas fa-power-off"></i></button>
        </header>


        <section class="recap-container">
            <div class="recap-card">
                <h4>ðŸ’° Total Omzet</h4>
                <p id="totalOmzet">Rp 0</p>
            </div>
            <div class="recap-card">
                <h4>ðŸ“¦ Total Order</h4>
                <p id="totalOrderCount">0</p>
            </div>
            <div class="recap-card">
                <h4>ðŸ“‰ Belum Bayar</h4>
                <p id="unpaidAmount" style="color: #ef4444;">Rp 0</p>
            </div>
        </section>

        <section class="order-form">
            <h2><i class="fas fa-plus-circle"></i> Tambah Order Baru</h2>
            <div class="form-container">
                <div class="form-group">
                    <label>Nama Pelanggan</label>
                    <input type="text" id="nama" placeholder="Nama pelanggan...">
                </div>
                <div class="form-group">
                    <label>Nomor WhatsApp</label>
                    <input type="text" id="telp" placeholder="Contoh: 62812...">
                </div>
                <div class="form-group">
                    <label>Jenis Pakaian</label>
                    <select id="jenis">
                        <option value="Baju">Baju</option>
                        <option value="Celana">Celana</option>
                        <option value="Jaket">Jaket</option>
                        <option value="Selimut">Selimut</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Berat (kg)</label>
                    <input type="number" id="berat" placeholder="0.0" step="0.1">
                </div>
                <div class="form-group">
                    <label>Layanan</label>
                    <select id="layanan">
                        <option value="Normal">Normal</option>
                        <option value="Fast">Fast</option>
                        <option value="Express">Express</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Metode Pembayaran</label>
                    <select id="pembayaran">
                        <option value="Belum Bayar">Bayar Nanti (Saat Diambil)</option>
                        <option value="Lunas">Bayar Sekarang (Lunas)</option>
                    </select>
                </div>
                <div class="form-group full-width">
                    <button id="btnSimpanOrder" onclick="tambahOrder()">
                        Simpan Order Baru <i class="fas fa-save"></i>
                    </button>
                </div>
            </div>
        </section>

        <div class="dashboard-grid">
            <section class="stats">
                <div class="stat-card">
                    <h3>Total Pendapatan</h3>
                    <p id="totalPendapatan">Rp 0</p>
                </div>
                <div class="stat-card">
                    <h3>Order Aktif</h3>
                    <p id="orderAktif">0</p>
                </div>
            </section>
            <section class="chart-section">
                <h3>Analisis Paket Layanan</h3>
                <div style="height: 200px; position: relative;">
                    <canvas id="laundryChart"></canvas>
                </div>
            </section>
        </div>

        <section class="dashboard">
            <div class="tab-menu">
                <button class="tab-btn active" id="tabActive" onclick="changeTab('active')">Cucian Diproses</button>
                <button class="tab-btn" id="tabDone" onclick="changeTab('done')">Riwayat Selesai</button>
            </div>

            <div class="search-filter-wrapper">
                <div class="search-input-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Cari Nama Pelanggan..." onkeyup="cariPelanggan()">
                </div>
                <div class="sort-select-box">
                    <select id="sortOrder" onchange="sortData()">
                        <option value="newest">Urutkan: Terbaru</option>
                        <option value="oldest">Urutkan: Terlama</option>
                        <option value="highest">Biaya Tertinggi</option>
                        <option value="lowest">Biaya Terendah</option>
                    </select>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>

            <table id="laundryTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Pelanggan</th>
                        <th>Berat</th>
                        <th>Status</th>
                        <th>Biaya</th>
                        <th>Bayar</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="orderList"></tbody>
            </table>
        </section>
    </div>
    <script src="script.js"></script>

    <div id="deleteModal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-header">
                <i class="fas fa-trash-alt fa-2x" style="color: #ef4444;"></i>
                <h3>Hapus Order?</h3>
            </div>
            <p>Data yang dihapus dari server tidak dapat dikembalikan. Lanjutkan?</p>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeDeleteModal()">Batal</button>
                <button id="btnConfirmDelete" class="btn-confirm">Ya, Hapus</button>
            </div>
        </div>
    </div>
</body>

</html>